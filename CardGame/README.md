# Игри с карти (първа част)

Целта на цялата задача ще бъде да се имплементира програма, която чете тесте карти от стандартния вход, и извършва операции с тестетата. (Подобна на тази от първия срок.)

В първата част на задачата ще трябва да се имплементират само класовете за тестета, карти и ръце.

**Не необходимо да имплементирате main функция, или каквито и да е било методи и класове за изпълнение на команди/операции.**

## Програмен интерфейс (API)

Програмният интерфейс (API) на една библиотека обикновено наричаме декларацията на всички публични класове и методи. В Java това става в интерфейси, а в случая имаме и два изброими типа – всички те се намират в пакета `org.elsys.cardgame.api`:
 * `CardGame.CardGame.Api.CardGame.Api.Card` – интерфейс за карта; съдържа методи за достъп до ранг и боя
 * `CardGame.Api.Deck` – интерфейс за тесте; съдържа методи за достъп до всички карти от тестето, размер, размер на ръката, сщо и методи за раздаване, теглене, сортиран и размесване на карти
 * `CardGame.Api.Hand` – интерфейс за ръка; съдържа методи за достъп до картите в ръката, както и за броя им
 * изброимите типове в пакета са `CardGame.Api.Rank` (ранг на карта) и `CardGame.Api.Suit` (боя на карта).

За всеки от трите интерфейсите трябва да предоставите имплементации (класове, които ги имплементират), така че jUnit тестовете да минават.

## Тестета за война, белот и сантасе

В класа `DeckFactory` трябва да имплементирате трите метода, които създават тестета съответно за война, белот и сантасе. И трите метода връщат тип `CardGame.Api.Deck`, така че единственото задължително условие е класът, който ще върнат, да наследява `CardGame.Api.Deck`. Могат да се изберат различни подходи – да направите само един наследник и да връщате него в трите метода или да направите отделни класове за различните тестета с общ абстрактен родителски клас. Това преценете сами.

В първоначалното си състояние картите в тестетата трябва да са подредени във възходящ ред от най-слабата към най-силната. Т.е. раздавайки или теглейки картите „отгоре надолу“ теглите от първата (най-слабата) към последната (най-силната). При сортиране картите следва да се подредят в описания ред.

Следват детайли за различните игри.

### Сила на боите

Тя е еднаква за всички игри и е както следва (в нарастващ ред): clubs, diamonds, hearts, spades.

### Детайли за война

*   Рангове в нарастващ ред - `2 3 4 5 6 7 8 9 10 Jack Queen King Ace`
*   Общ брой карти - 52
*   Брой карти в ръка - 26 (тук `deal` ще върне ръка с първите 26 карти от колодата)

### Детайли и команди, специфични за белот

*   Рангове в нарастващ ред - `7 8 9 Jack Queen King 10 Ace`
*   Общ брой карти - 32
*   Брой карти в ръка - 8 (тук `deal` ще върне ръка с първите 8 карти от колодата)

### Детайли и команди, специфични за сантасе

*   Рангове в нарастващ ред - `9 Jack Queen King 10 Ace`
*   Общ брой карти - 24
*   Брой карти в ръка - 6 (тук `deal` ще върне ръка с първите 6 карти от колодата)

# Игри с карти (продължение)

Целта на цялата задача ще бъде да се имплементира програма, която чете тесте карти от стандартния вход, и извършва операции с тестетата. (Подобна на тази от първия срок.)

В първата част на задачата трябваше да се имплементират само класовете за тестета, карти и ръце.

В тази част трябва да имплементирате класове, имплементиращи интерфейсите `Game` и `Operation`, както и `main` метод, намиращ се в класа `Main`.

## Програмен интерфейс (API)

 * `Operation` – това е интерфейсът за една операция (списък с всички операции в следващата секция); тя има име и метод, който изпълнява самата операция;
 * `Game` – интерфейс за игра; играта по същество се състои от списък с операции и тесте, върху което да се изпълняват операциите; също така пази в себе си и информация за последно раздадената ръка.

Инстанции на `Game` се създават от класа `GameFactory`, които като аргументи получават списък от карти, които да използват.

За всеки от двата интерфейса, както и за методите в `GameFactory` трябва да предоставите имплементации (класове, които ги имплементират), така че jUnit тестовете да минават.

## Операции, които се изпълняват върху тесте

Операциите, които могат да се изпълняват чрез метода `Game.process`, са следните:

 *   `size` - принтира в конзолата текущия брой на картите в тестето
 *   `draw_top_card` - премахва най-горната (първата) карта от тестето и я принтира
 *   `draw_bottom_card` - премахва най-долната (последната) карта от тестето и я принтира
 *   `top_card` - принтира горната карта **без** да я премахва от тестето
 *   `bottom_card` - принтира долната карта **без** да я премахва от тестето
 *   `shuffle` - разбърква картите в тестето и ги принтира
 *   `sort` - сортира тестето и принтира картите 
 *   `deal` - „раздава карти“ като взима от най-горната към най-долната (най-горната карта в тестето ще е първа в ръката). Броят на картите, които се раздават, е специфичен за всяко тесте. Принтира раздадената ръка от първата към последната карта.

**Забележка:** Ако няма достатъчно карти в тестето на играта, при изпълнение на `deal`, `draw_top_card`, `draw_bottom_card`, `top_card` или `bottom_card` трябва да се хвърли изключение `CardException` със съобщение за грешка: `ERROR: Not enough cards in deck`.

## `main` метод

`main` методът, който трябва да се имплементира, прочита еднократно като първа стъпка поредица от карти от стандартния вход в следния формат:
```
SK SA S2 D9 D10 H2 H4 H6 HJ HQ HA C7 C8 C9
```

Т.е. форматът на четене и писане на карти от конзолата е следният: `<първа буква на боята><първа буква на ранг/число>`. Например: `SK` (поп пика), `D10` (десятка каро).

Списъкът с карти се подава еднократно в началото на програмата. След това програмата очаква само операции, които да изпълнява. Операциите се изпълняват, докато програмата не прочете `quit`. Когато прочете невалидна операция, програмата трябва да изпише съобщение за грешка: `ERROR: Unknown operation` и да очаква нова операция от стандартния вход.


Операциите се делят на два вида: операции за създаване на тесте и операции, които се изпълняват върху самото тесте.

Операциите за създаване на тесте са `War`, `Belote` и `Santase`. При извикването им, програмата трябва да провери дали с подадените карти може да се играе съответната игра (по-надолу са описани детайли за трите игри) и ако не може, да изпише съобщение за грешка `ERROR: Not enough cards for <game name>`, където `<game name>` е името на играта на английски с главна буква. Картите в новосъздаденото тесте трябва да са подредени, както са били подадени първоначално. Ако има излишни карти, те трябва да се премахнат от тестето за игра.

(Side note: няма jUnit тестове, които да тестват за операциите за създаване на тесте, така че вие трябва да решите дали ще бъдат като операции в `Game` или просто в `main` метода.)

Операции върху тестета могат да се изпълняват едва след като вече е изпълнена операция за създаване на такова. Ако се подаде операция върху тесте, преди да е създадено такова, програмата трябва изпише съобщение за грешка `ERROR: No deck`.

Списък с операциите върху тесте има по-горе в условието. Ако няма достатъчно карти в тестето, при изпълнение на `deal`, `draw_top_card`, `draw_bottom_card`, `top_card` или `bottom_card` трябва да изпише грешка: `ERROR: Not enough cards in deck`.

След всяко съобщение за грешка, програмата продължава работа като очаква следваща операция от стандартния вход.

Когато отново се подаде операция за създаване на тесте, програмата трябва наново от първоначално въведените карти да опита да създаде тесте от съответния тип. Последващите операции се изпълняват върху новото тесте.


Примерно изпълнение на програмата:

```
> S9 SJ SQ DA H9 HJ CK SK S10 SA D9 DJ DQ DK D10 C10 CA HQ HK H10 HA C9 CJ CQ
> Santase
> deal
S9 SJ SQ DA H9 HJ
> top_card
CK
> unknown
ERROR: Unknown operation
> quit

```

## Предаване

Да обобщим, първата ви задача е да имплементирате методите в `GameFactory`, както и да направите имплементации на `Game` и `Operation`. Втората задача е да имплементирате `main` метода.

Срокът за предаване е 07.01.2025 20:00 в moodle.

